# Lab 1: Prompt Engineering

## Prerequisites

- GitHub Copilot extension installed in your IDE
- Installation of .NET SDK 7.0 or later

## Estimated time

- 45 minutes

## Objectives

Learn how to use common prompt engineering techniques using GittHub Copilot

- Zero and Few Shot Prompting
- Chain of Thought Method of Prompting
- Generated Knowledge Prompting 

## Step 1 - Zero and Few Shot Prompting

- Large language models (LLMs) are tuned to follow instructions and are trained on large amounts of data. Large-scale training makes these models capable of performing some tasks in a "zero-shot" manner. 

 - Zero-shot prompting means that the prompt used to interact with the model won't contain examples or demonstrations. The zero-shot prompt directly instructs the model to perform a task without any additional examples to steer it.

- Let's try the following zero-shot prompt to generate a Blazor Server application

    ```
    Create a Blazor Server application that displays ten greatest hits from the 80s on the home page. Provide detailed code and commands
    ```

- Note that the prompt is short and does not contain any examples. The following is part of an example output:

    ```sh
    dotnet new blazorserver -o GreatestHitsApp
    cd GreatestHitsApp
    ```

    ```c#
    namespace GreatestHitsApp.Models
    {
        public class Song
        {
            public string Title { get; set; }
            public string Artist { get; set; }
            public int Year { get; set; }
        }
    }
    ```

- Your output might be slightly different

- While large-language models demonstrate remarkable zero-shot capabilities, they still fall short on more complex tasks when using the zero-shot setting. 

- Few-shot prompting can be used as a technique to enable in-context learning where we provide demonstrations in the prompt to steer the model to better performance. The demonstrations serve as conditioning for subsequent examples where we would like the model to generate a response.

- Let's try the following few-shot prompt to generate a Blazor Server application

     ```
    Create a Blazor Server application that displays ten songs on the home page. Provide detailed code and commands

    Examples:
    ‚ÄúPurple Rain‚Äù by Prince (1984)
    ‚ÄúThriller‚Äù by Michael Jackson (1982)
    ‚ÄúCareless Whisper‚Äù by Wham! (1984)
    ```

- Note we provide some greatest hits from the 80s as examples

- The output should be similar to the zero-shot prompt, however Copilot is able to figure out the rest of the list based on the examples provided

- Standard few-shot prompting works well for many tasks containing simple repeated patterns but is still not a perfect technique, especially when dealing with more complex tasks, such as complex arithmetic, commonsense, and symbolic reasoning. For these tasks, we need to use more advanced prompting techniques, such as chain-of-thought prompting in the next section.

## Step 2 - Chain of Thought Method of Prompting

- Chain-of-thought (CoT) prompting enables complex reasoning capabilities through intermediate reasoning steps. You can combine it with few-shot prompting to get better results on more complex tasks that require reasoning before responding.

- Using the same example as before, let's try the following chain-of-thought prompt to generate a Blazor Server application

    ```
    Let's create a Blazor Server application step by step that displays a list of songs

    Step 1: Create a new Blazor Server application
    Step 2: Create a model for songs
    Step 3: Create a service to get the list of greatest hit songs from 80s
    Step 4: Register the service in the main program
    Step 5: Create a component to display the list of songs
    Step 6: Update the navigation menu to include the new component
    ```

- The output should be similar to the few-shot prompt, however Copilot is able to generate the code in a more structured manner, where each code snippet corresponds to a step in the chain of thought

### Zero-Shot Chain of Thought

- For complex tasks that follow common patterns, you can simplify the chain of thought prompting above by using a single zero-shot prompt. Here is the simplified COT prompt for the same task

    ```
    Create a Blazor Server application that displays a list of greatest hits from the 80s
    Let's think step by step
    ```

- Copilot will first generate a step-by-step plan for creating the application and then generate the code for each step. The following is an example plan generated by Copilot

    ```
    1. Create a new Blazor Server project.
    2. Define a Song model.
    3. Create a SongService to manage the list of songs.
    4. Develop a Razor component to display the songs.
    5. Update the main page to include the songs component.
    6. Run the application.
    ```

- This method is particularly useful where you don't know the exact steps and you can even take plan created by Copilot and modify it to fit your exact requirements.

## Step 3 - Generated Knowledge Prompting

- Generated Knowledge Prompting (GKP) is a technique that enhances commonsense reasoning by leveraging the latent knowledge embedded within large language models. This method generates task-relevant knowledge statements from a language model and integrates this knowledge into the inference process to improve the output quality.

- GKP essentially consists of two steps:

    1. Knowledge Generation: Prompt the AI to provide some facts related to a task you are interested to perform. These statements will provide useful context or reasoning pathways for the next step.
    2. Knowledge Integration: Prompt the AI to perform the task you want and included the generated knowledge as context. This enables the model to utilize the additional context to make more accurate predictions.

- Unlike traditional approaches requiring external knowledge bases or task-specific fine-tuning, GKP allows for flexible, on-the-fly augmentation using the same underlying language model.

- Let's see a simple example using Github Copilot to create a factorial function in Python. First, we use a common prompt

    ```
    create a function that returns the factorial of a number in Python
    ```

- and we will get an output similar to the following

    ```python
    def factorial(n):
        if n == 0:
            return 1
        else:
            return n * factorial(n - 1)
    ```

- Nothing suprising here, just a simple factorial function. Now let's use GKP to enhance the function quality. First, we ask Github Copilot to generate some facts related to the task

    ```
    Generate some facts about factorials
    ```

- Github Copilot will then list some key facts about factorials.

- Next, we ask Github Copilot to do the actual task while referencing the previously generated knowledge as context 

    ```
    Now use the above knowledge to create a function that returns the factorial of a number in Python
    ```

- and we will get an output similar to the following

    ```python
    def factorial(n):
        if n < 0:
            raise ValueError("Factorial is not defined for negative numbers")
        elif n == 0:
            return 1
        else:
            return n * factorial(n - 1)
    ```

- Notice the output function now includes a check for negative numbers because of the addition knowledge that n is not defined for negative numbers.

- Now, let's try a more complex example using GKP.

    ```
    Generate 5 facts about software architecture paradigms that a well-written web app in C# using Blazor should have
    ```
- Github Copilot will list some facts about software architecture paradigms especially those that are related to Blazor applications.

- Next, we ask Github Copilot to create a full-blown Blazor application using the generated knowledge as context

    ```
    Now use the above knowledge to create a Blazor application that list some greatest hits from the 80s with links to the artist pages within the same application
    ```

- Github Copilot will give a detailed plan on how to create such an application based on the software architecture knowledge from above and all the relevant code snippets to get you started.

- This GKP technique is particularly useful when you need higher quality output for complex tasks that require common sense reasoning.

### Congratulations you've completed it! üéâ

## References

- [Prompting Techniques](https://www.promptingguide.ai/techniques)
- [Liu et al. 2022. Generated Knowledge Prompting for Commonsense Reasoning](https://arxiv.org/pdf/2110.08387)